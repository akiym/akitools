# -*- coding: utf-8 -*-
import os
import sys
import time
import re
import struct
import socket
import telnetlib

q = lambda x: struct.pack("<I", x)
Q = lambda x: struct.unpack("<I", x)[0]

def interact():
    t = telnetlib.Telnet()
    t.sock = s
    t.interact()

def recvuntil(st, debug=False):
    ret = ""
    while st not in ret:
        lret = s.recv(1)
        if debug and len(lret) > 0:
            print lret
        ret += lret
    return ret

connect = lambda: socket.create_connection((host, port))

REMOTE = len(sys.argv) >= 2 and sys.argv[1] == 'r'

if REMOTE:
    host = ''
    port = 0
else:
    host = '127.0.0.1'
    port = 4000

s = connect()

payload = (
    ''
)
s.send(payload)
interact()
